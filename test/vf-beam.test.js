import { expect, fixture, html } from '@open-wc/testing';

import '../src/index';

describe('vf-beam', () => {
  it('Simple beam', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-system>
          <vf-stave clef='treble' timeSig='4/4'>
            <vf-voice stem='down'>
              <vf-beam>c4/8, f5, d5, g5</vf-beam>
              <vf-beam>d6/8, f5, d5, g5</vf-beam>
            </vf-voice>
          </vf-stave>
        </vf-system>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="130" viewBox="0 0 500 130" style="width: 500px; height: 130px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 40L499 40"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 50L499 50"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 60L499 60"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 70L499 70"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L499 80"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 71M28.280256 80.199872C29.116608 80.199872,30.079680000000003 80.12384,30.814656 79.971776C31.194816000000003 79.89574400000001,31.270848 79.8704,31.346880000000002 80.301248C31.777728 82.759616,32.335296 85.927616,32.335296 87.651008C32.335296 93.04928000000001,28.685760000000002 93.708224,26.53152 93.708224C24.554688 93.708224,23.61696 93.12531200000001,23.61696 92.643776C23.61696 92.390336,23.946432 92.28896,24.782784 92.010176C25.923264000000003 91.680704,27.215808000000003 90.71763200000001,27.215808000000003 88.588736C27.215808000000003 86.58656,25.948608 84.863168,23.718336 84.863168C21.285312 84.863168,19.81536 86.814656,19.81536 89.070272C19.81536 91.42726400000001,21.234624 95.026112,26.759616 95.026112C29.19264 95.026112,33.931968 93.910976,33.931968 87.72704C33.931968 85.62348800000001,33.27302400000001 82.176704,32.892864 79.89574400000001C32.816832000000005 79.464896,32.842176 79.515584,33.349056000000004 79.287488C37.04928 77.817536,39.482304 74.725568,39.482304 70.594496C39.482304 65.9312,36.060864 61.800128,30.687936 61.800128C29.750208 61.800128,29.750208 61.800128,29.623488000000002 61.141183999999996L28.711104 55.844288C28.660416 55.41344,28.711104 55.388096,28.9392 55.16C32.892864 51.485119999999995,35.883456 46.847167999999996,35.883456 41.246144C35.883456 38.078143999999995,34.996415999999996 34.935488,33.50112 32.755903999999994C32.943552 31.944896,32.005824000000004 30.931135999999995,31.60032 30.931135999999995C31.09344 30.931135999999995,29.95296 31.868863999999995,29.243328 32.679871999999996C26.53152 35.670463999999996,25.64448 40.232383999999996,25.64448 44.033984C25.64448 46.137536,25.923264000000003 48.519872,26.176704 50.015168C26.252736 50.446016,26.278080000000003 50.522048,25.847231999999998 50.902208C20.57568 55.236031999999994,15 60.456896,15 67.832C15 74.168,19.333824 80.199872,28.280256 80.199872M17.91456 70.265024C17.91456 68.110784,18.29472 65.221568,21.310656 61.800128C23.515584 59.367104,25.188288 57.998528,26.886336 56.629952C27.266496 56.325824,27.342528 56.376512,27.41856 56.756671999999995L28.17888 61.445312C28.280256 62.129599999999996,28.280256 62.104256,27.621312000000003 62.307007999999996C24.427968 63.3968,22.324416 66.286016,22.324416 69.403328C22.324416 72.672704,24.047808 75.004352,26.53152 75.866048C26.835648 75.967424,27.266496 76.0688,27.519936 76.0688C27.798720000000003 76.0688,27.950784 75.891392,27.950784 75.663296C27.950784 75.409856,27.672 75.30848,27.41856 75.207104C25.872576000000002 74.54816,24.782784 72.976832,24.782784 71.304128C24.782784 69.200576,26.202048 67.654592,28.43232 67.020992C29.015232 66.868928,29.091264000000002 66.919616,29.167296 67.32512L30.992064 78.19769600000001C31.068096 78.6032,31.017408 78.6032,30.485184000000004 78.704576C29.902272000000004 78.805952,29.167296 78.881984,28.43232 78.881984C22.045632 78.881984,17.91456 75.33382399999999,17.91456 70.265024M32.157888 36.582848C33.349056000000004 36.582848,34.337472000000005 37.571264,34.337472000000005 39.57344C34.337472000000005 43.628479999999996,30.865344 46.923199999999994,28.001472 49.432255999999995C27.748032000000002 49.660352,27.595968 49.609663999999995,27.519936 49.128128C27.367872 48.1904,27.29184 46.948544,27.29184 45.78272C27.29184 40.08032,29.927616 36.582848,32.157888 36.582848M31.09344 66.742208C34.058688000000004 66.995648,36.49171200000001 69.47936,36.49171200000001 72.672704C36.49171200000001 74.979008,35.097792 76.82912,33.070272 77.868224C32.639424000000005 78.070976,32.563392 78.070976,32.48736 77.640128L30.687936 67.249088C30.611904000000003 66.792896,30.662592000000004 66.69152,31.09344 66.742208"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M56 50M57.41984 53.94128L63.956 53.94128L63.956 56.16896C63.956 57.12368,63.19712 57.39296,62.56064 57.39296C61.9976 57.39296,61.7528 57.7112,61.7528 58.0784C61.7528 58.42112,61.8752 58.812799999999996,62.413759999999996 58.812799999999996L69.92912 58.812799999999996C70.27184 58.812799999999996,70.63904 58.568,70.63904 58.0784C70.63904 57.5888,70.19839999999999 57.36848,69.85568 57.36848C69.51295999999999 57.36848,68.75408 57.14816,68.75408 56.02208L68.75408 53.94128L71.32448 53.94128C71.69167999999999 53.94128,71.86304 53.69648,71.86304 53.28032C71.86304 52.86416,71.71616 52.61936,71.32448 52.61936L68.75408 52.61936L68.75408 45.05504C68.75408 44.78576,68.7296 44.46752,68.33792 44.46752C68.01968 44.46752,67.84832 44.54096,67.628 44.78576L64.27423999999999 48.82496C64.15183999999999 49.0208,63.956 49.21664,63.956 49.65728L63.956 52.61936L59.20688 52.61936C62.02208 50.22032,67.67696 42.215360000000004,67.77488 41.82368C67.77488 41.75024,67.79936 41.72576,67.79936 41.65232C67.79936 41.35856,67.55456 41.16272,67.28528 41.16272C66.96704 41.16272,65.52271999999999 41.21168,64.88624 41.21168C64.24976 41.21168,62.65856 41.16272,62.38928 41.16272C62.071039999999996 41.16272,61.58144 41.26064,61.58144 41.82368C61.58144 46.18112,58.10528 51.1016,57.05264 52.5704L56.8568 52.86416C56.8568 52.88864,56.80784 52.9376,56.80784 52.96208C56.7344 53.108959999999996,56.70992 53.23136,56.70992 53.35376C56.70992 53.69648,56.9792 53.94128,57.41984 53.94128"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M56 70M57.41984 73.94128L63.956 73.94128L63.956 76.16896C63.956 77.12368,63.19712 77.39296,62.56064 77.39296C61.9976 77.39296,61.7528 77.7112,61.7528 78.0784C61.7528 78.42112,61.8752 78.8128,62.413759999999996 78.8128L69.92912 78.8128C70.27184 78.8128,70.63904 78.568,70.63904 78.0784C70.63904 77.58879999999999,70.19839999999999 77.36848,69.85568 77.36848C69.51295999999999 77.36848,68.75408 77.14816,68.75408 76.02208L68.75408 73.94128L71.32448 73.94128C71.69167999999999 73.94128,71.86304 73.69648,71.86304 73.28032C71.86304 72.86416,71.71616 72.61936,71.32448 72.61936L68.75408 72.61936L68.75408 65.05504C68.75408 64.78576,68.7296 64.46752000000001,68.33792 64.46752000000001C68.01968 64.46752000000001,67.84832 64.54096,67.628 64.78576L64.27423999999999 68.82496C64.15183999999999 69.0208,63.956 69.21664,63.956 69.65728L63.956 72.61936L59.20688 72.61936C62.02208 70.22032,67.67696 62.215360000000004,67.77488 61.82368C67.77488 61.75024,67.79936 61.72576,67.79936 61.65232C67.79936 61.35856,67.55456 61.16272,67.28528 61.16272C66.96704 61.16272,65.52271999999999 61.21168,64.88624 61.21168C64.24976 61.21168,62.65856 61.16272,62.38928 61.16272C62.071039999999996 61.16272,61.58144 61.26064,61.58144 61.82368C61.58144 66.18112,58.10528 71.1016,57.05264 72.5704L56.8568 72.86416C56.8568 72.88864,56.80784 72.9376,56.80784 72.96208C56.7344 73.10896,56.70992 73.23136,56.70992 73.35376C56.70992 73.69648,56.9792 73.94128,57.41984 73.94128"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M80.15312 90L98.08712 90"></path><g class="vf-stavenote" id="vf-auto1695"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M83.15312 90M83.15312 91.6848C83.15312 93.7908,84.89408 95.0544,87.08432 95.0544C90.67856 95.0544,95.08712 91.74096,95.08712 88.3152C95.08712 86.23728,93.45848000000001 84.9456,91.15592000000001 84.9456C86.71928 84.9456,83.15312 88.23096,83.15312 91.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1705"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M133.64222999999998 40M133.64222999999998 41.6848C133.64222999999998 43.7908,135.38318999999998 45.0544,137.57342999999997 45.0544C141.16767 45.0544,145.57622999999998 41.74096,145.57622999999998 38.3152C145.57622999999998 36.23728,143.94759 34.9456,141.64503 34.9456C137.20838999999998 34.9456,133.64222999999998 38.23096,133.64222999999998 41.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1715"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M184.13133999999997 50M184.13133999999997 51.6848C184.13133999999997 53.7908,185.87229999999997 55.0544,188.06253999999996 55.0544C191.65677999999997 55.0544,196.06533999999996 51.74096,196.06533999999996 48.3152C196.06533999999996 46.23728,194.43669999999997 44.9456,192.13413999999997 44.9456C187.69749999999996 44.9456,184.13133999999997 48.23096,184.13133999999997 51.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1725"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M234.62044999999995 35M234.62044999999995 36.6848C234.62044999999995 38.7908,236.36140999999995 40.0544,238.55164999999994 40.0544C242.14588999999995 40.0544,246.55444999999995 36.74096,246.55444999999995 33.3152C246.55444999999995 31.23728,244.92580999999996 29.9456,242.62324999999996 29.9456C238.18660999999994 29.9456,234.62044999999995 33.23096,234.62044999999995 36.6848"></path></g></g><g class="vf-modifiers"></g></g><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M282.10955999999993 30L300.04355999999996 30"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M282.10955999999993 20L300.04355999999996 20"></path><g class="vf-stavenote" id="vf-auto1736"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M285.10955999999993 15M285.10955999999993 16.6848C285.10955999999993 18.7908,286.8505199999999 20.0544,289.0407599999999 20.0544C292.63499999999993 20.0544,297.04355999999996 16.74096,297.04355999999996 13.3152C297.04355999999996 11.23728,295.41491999999994 9.945599999999999,293.1123599999999 9.945599999999999C288.67571999999996 9.945599999999999,285.10955999999993 13.23096,285.10955999999993 16.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1746"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M335.5986699999999 40M335.5986699999999 41.6848C335.5986699999999 43.7908,337.3396299999999 45.0544,339.5298699999999 45.0544C343.1241099999999 45.0544,347.53266999999994 41.74096,347.53266999999994 38.3152C347.53266999999994 36.23728,345.9040299999999 34.9456,343.6014699999999 34.9456C339.16482999999994 34.9456,335.5986699999999 38.23096,335.5986699999999 41.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1756"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M386.0877799999999 50M386.0877799999999 51.6848C386.0877799999999 53.7908,387.82873999999987 55.0544,390.0189799999999 55.0544C393.6132199999999 55.0544,398.0217799999999 51.74096,398.0217799999999 48.3152C398.0217799999999 46.23728,396.3931399999999 44.9456,394.0905799999999 44.9456C389.6539399999999 44.9456,386.0877799999999 48.23096,386.0877799999999 51.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1766"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M436.5768899999999 35M436.5768899999999 36.6848C436.5768899999999 38.7908,438.31784999999985 40.0544,440.50808999999987 40.0544C444.1023299999999 40.0544,448.5108899999999 36.74096,448.5108899999999 33.3152C448.5108899999999 31.23728,446.8822499999999 29.9456,444.57968999999986 29.9456C440.1430499999999 29.9456,436.5768899999999 33.23096,436.5768899999999 36.6848"></path></g></g><g class="vf-modifiers"></g></g><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M83.90312 92L83.90312 124.25"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M134.39222999999998 42L134.39222999999998 111.6277225"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M184.88133999999997 52L184.88133999999997 99.00544500000001"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M235.37044999999995 37L235.37044999999995 86.38316750000001"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M83.15312 125.1875L83.15312 120.1875L235.62044999999995 82.32066750000001L235.62044999999995 87.32066750000001Z"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M285.85955999999993 17L285.85955999999993 66.57881150000003"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M336.3486699999999 42L336.3486699999999 75.41440575000001"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M386.8377799999999 52L386.8377799999999 84.25"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M437.3268899999999 37L437.3268899999999 93.08559425000001"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M285.10955999999993 67.19756150000003L285.10955999999993 62.197561500000035L437.5768899999999 88.70434425000002L437.5768899999999 93.70434425000002Z"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="499" y="40" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="40" width="1" height="41"></rect></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });
});
