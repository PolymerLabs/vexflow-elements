import { expect, fixture, html } from '@open-wc/testing';

import '../src/index';

describe('vf-voice', () => {
  it('Defaults to stem up if no stem attribute', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-system>
          <vf-stave clef='treble' keySig='C'>
            <vf-voice>C4/q, D4, E4, F4</vf-voice>
          </vf-stave>
        </vf-system>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="130" viewBox="0 0 500 130" style="width: 500px; height: 130px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 40L499 40"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 50L499 50"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 60L499 60"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 70L499 70"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L499 80"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 71M28.280256 80.199872C29.116608 80.199872,30.079680000000003 80.12384,30.814656 79.971776C31.194816000000003 79.89574400000001,31.270848 79.8704,31.346880000000002 80.301248C31.777728 82.759616,32.335296 85.927616,32.335296 87.651008C32.335296 93.04928000000001,28.685760000000002 93.708224,26.53152 93.708224C24.554688 93.708224,23.61696 93.12531200000001,23.61696 92.643776C23.61696 92.390336,23.946432 92.28896,24.782784 92.010176C25.923264000000003 91.680704,27.215808000000003 90.71763200000001,27.215808000000003 88.588736C27.215808000000003 86.58656,25.948608 84.863168,23.718336 84.863168C21.285312 84.863168,19.81536 86.814656,19.81536 89.070272C19.81536 91.42726400000001,21.234624 95.026112,26.759616 95.026112C29.19264 95.026112,33.931968 93.910976,33.931968 87.72704C33.931968 85.62348800000001,33.27302400000001 82.176704,32.892864 79.89574400000001C32.816832000000005 79.464896,32.842176 79.515584,33.349056000000004 79.287488C37.04928 77.817536,39.482304 74.725568,39.482304 70.594496C39.482304 65.9312,36.060864 61.800128,30.687936 61.800128C29.750208 61.800128,29.750208 61.800128,29.623488000000002 61.141183999999996L28.711104 55.844288C28.660416 55.41344,28.711104 55.388096,28.9392 55.16C32.892864 51.485119999999995,35.883456 46.847167999999996,35.883456 41.246144C35.883456 38.078143999999995,34.996415999999996 34.935488,33.50112 32.755903999999994C32.943552 31.944896,32.005824000000004 30.931135999999995,31.60032 30.931135999999995C31.09344 30.931135999999995,29.95296 31.868863999999995,29.243328 32.679871999999996C26.53152 35.670463999999996,25.64448 40.232383999999996,25.64448 44.033984C25.64448 46.137536,25.923264000000003 48.519872,26.176704 50.015168C26.252736 50.446016,26.278080000000003 50.522048,25.847231999999998 50.902208C20.57568 55.236031999999994,15 60.456896,15 67.832C15 74.168,19.333824 80.199872,28.280256 80.199872M17.91456 70.265024C17.91456 68.110784,18.29472 65.221568,21.310656 61.800128C23.515584 59.367104,25.188288 57.998528,26.886336 56.629952C27.266496 56.325824,27.342528 56.376512,27.41856 56.756671999999995L28.17888 61.445312C28.280256 62.129599999999996,28.280256 62.104256,27.621312000000003 62.307007999999996C24.427968 63.3968,22.324416 66.286016,22.324416 69.403328C22.324416 72.672704,24.047808 75.004352,26.53152 75.866048C26.835648 75.967424,27.266496 76.0688,27.519936 76.0688C27.798720000000003 76.0688,27.950784 75.891392,27.950784 75.663296C27.950784 75.409856,27.672 75.30848,27.41856 75.207104C25.872576000000002 74.54816,24.782784 72.976832,24.782784 71.304128C24.782784 69.200576,26.202048 67.654592,28.43232 67.020992C29.015232 66.868928,29.091264000000002 66.919616,29.167296 67.32512L30.992064 78.19769600000001C31.068096 78.6032,31.017408 78.6032,30.485184000000004 78.704576C29.902272000000004 78.805952,29.167296 78.881984,28.43232 78.881984C22.045632 78.881984,17.91456 75.33382399999999,17.91456 70.265024M32.157888 36.582848C33.349056000000004 36.582848,34.337472000000005 37.571264,34.337472000000005 39.57344C34.337472000000005 43.628479999999996,30.865344 46.923199999999994,28.001472 49.432255999999995C27.748032000000002 49.660352,27.595968 49.609663999999995,27.519936 49.128128C27.367872 48.1904,27.29184 46.948544,27.29184 45.78272C27.29184 40.08032,29.927616 36.582848,32.157888 36.582848M31.09344 66.742208C34.058688000000004 66.995648,36.49171200000001 69.47936,36.49171200000001 72.672704C36.49171200000001 74.979008,35.097792 76.82912,33.070272 77.868224C32.639424000000005 78.070976,32.563392 78.070976,32.48736 77.640128L30.687936 67.249088C30.611904000000003 66.792896,30.662592000000004 66.69152,31.09344 66.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M50 90L67.934 90"></path><g class="vf-stavenote" id="vf-auto1000"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M64.184 90L64.184 55"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 90M53 91.6848C53 93.7908,54.74096 95.0544,56.9312 95.0544C60.52544 95.0544,64.934 91.74096,64.934 88.3152C64.934 86.23728,63.30536 84.9456,61.0028 84.9456C56.566159999999996 84.9456,53 88.23096,53 91.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1008"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M172.7005 85L172.7005 50"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M161.5165 85M161.5165 86.6848C161.5165 88.7908,163.25746 90.0544,165.4477 90.0544C169.04194 90.0544,173.4505 86.74096,173.4505 83.3152C173.4505 81.23728,171.82186000000002 79.9456,169.51930000000002 79.9456C165.08266 79.9456,161.5165 83.23096,161.5165 86.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1016"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M281.217 80L281.217 45"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M270.03299999999996 80M270.03299999999996 81.6848C270.03299999999996 83.7908,271.77395999999993 85.0544,273.96419999999995 85.0544C277.55843999999996 85.0544,281.967 81.74096,281.967 78.3152C281.967 76.23728,280.33835999999997 74.9456,278.03579999999994 74.9456C273.59916 74.9456,270.03299999999996 78.23096,270.03299999999996 81.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1024"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M389.7335 75L389.7335 40"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M378.54949999999997 75M378.54949999999997 76.6848C378.54949999999997 78.7908,380.29045999999994 80.0544,382.48069999999996 80.0544C386.07493999999997 80.0544,390.4835 76.74096,390.4835 73.3152C390.4835 71.23728,388.85486 69.9456,386.55229999999995 69.9456C382.11566 69.9456,378.54949999999997 73.23096,378.54949999999997 76.6848"></path></g></g><g class="vf-modifiers"></g></g><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="499" y="40" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="40" width="1" height="41"></rect></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('Stem attribute set to down renders correctly', async() =>  {
    const el = await fixture(html`
      <vf-score>
        <vf-system>
          <vf-stave clef='treble' keySig='C'>
            <vf-voice stem='down'>C5/q, D5, E5, F5</vf-voice>
          </vf-stave>
        </vf-system>
      </vf-score>
    `); 

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="130" viewBox="0 0 500 130" style="width: 500px; height: 130px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 40L499 40"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 50L499 50"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 60L499 60"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 70L499 70"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L499 80"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 71M28.280256 80.199872C29.116608 80.199872,30.079680000000003 80.12384,30.814656 79.971776C31.194816000000003 79.89574400000001,31.270848 79.8704,31.346880000000002 80.301248C31.777728 82.759616,32.335296 85.927616,32.335296 87.651008C32.335296 93.04928000000001,28.685760000000002 93.708224,26.53152 93.708224C24.554688 93.708224,23.61696 93.12531200000001,23.61696 92.643776C23.61696 92.390336,23.946432 92.28896,24.782784 92.010176C25.923264000000003 91.680704,27.215808000000003 90.71763200000001,27.215808000000003 88.588736C27.215808000000003 86.58656,25.948608 84.863168,23.718336 84.863168C21.285312 84.863168,19.81536 86.814656,19.81536 89.070272C19.81536 91.42726400000001,21.234624 95.026112,26.759616 95.026112C29.19264 95.026112,33.931968 93.910976,33.931968 87.72704C33.931968 85.62348800000001,33.27302400000001 82.176704,32.892864 79.89574400000001C32.816832000000005 79.464896,32.842176 79.515584,33.349056000000004 79.287488C37.04928 77.817536,39.482304 74.725568,39.482304 70.594496C39.482304 65.9312,36.060864 61.800128,30.687936 61.800128C29.750208 61.800128,29.750208 61.800128,29.623488000000002 61.141183999999996L28.711104 55.844288C28.660416 55.41344,28.711104 55.388096,28.9392 55.16C32.892864 51.485119999999995,35.883456 46.847167999999996,35.883456 41.246144C35.883456 38.078143999999995,34.996415999999996 34.935488,33.50112 32.755903999999994C32.943552 31.944896,32.005824000000004 30.931135999999995,31.60032 30.931135999999995C31.09344 30.931135999999995,29.95296 31.868863999999995,29.243328 32.679871999999996C26.53152 35.670463999999996,25.64448 40.232383999999996,25.64448 44.033984C25.64448 46.137536,25.923264000000003 48.519872,26.176704 50.015168C26.252736 50.446016,26.278080000000003 50.522048,25.847231999999998 50.902208C20.57568 55.236031999999994,15 60.456896,15 67.832C15 74.168,19.333824 80.199872,28.280256 80.199872M17.91456 70.265024C17.91456 68.110784,18.29472 65.221568,21.310656 61.800128C23.515584 59.367104,25.188288 57.998528,26.886336 56.629952C27.266496 56.325824,27.342528 56.376512,27.41856 56.756671999999995L28.17888 61.445312C28.280256 62.129599999999996,28.280256 62.104256,27.621312000000003 62.307007999999996C24.427968 63.3968,22.324416 66.286016,22.324416 69.403328C22.324416 72.672704,24.047808 75.004352,26.53152 75.866048C26.835648 75.967424,27.266496 76.0688,27.519936 76.0688C27.798720000000003 76.0688,27.950784 75.891392,27.950784 75.663296C27.950784 75.409856,27.672 75.30848,27.41856 75.207104C25.872576000000002 74.54816,24.782784 72.976832,24.782784 71.304128C24.782784 69.200576,26.202048 67.654592,28.43232 67.020992C29.015232 66.868928,29.091264000000002 66.919616,29.167296 67.32512L30.992064 78.19769600000001C31.068096 78.6032,31.017408 78.6032,30.485184000000004 78.704576C29.902272000000004 78.805952,29.167296 78.881984,28.43232 78.881984C22.045632 78.881984,17.91456 75.33382399999999,17.91456 70.265024M32.157888 36.582848C33.349056000000004 36.582848,34.337472000000005 37.571264,34.337472000000005 39.57344C34.337472000000005 43.628479999999996,30.865344 46.923199999999994,28.001472 49.432255999999995C27.748032000000002 49.660352,27.595968 49.609663999999995,27.519936 49.128128C27.367872 48.1904,27.29184 46.948544,27.29184 45.78272C27.29184 40.08032,29.927616 36.582848,32.157888 36.582848M31.09344 66.742208C34.058688000000004 66.995648,36.49171200000001 69.47936,36.49171200000001 72.672704C36.49171200000001 74.979008,35.097792 76.82912,33.070272 77.868224C32.639424000000005 78.070976,32.563392 78.070976,32.48736 77.640128L30.687936 67.249088C30.611904000000003 66.792896,30.662592000000004 66.69152,31.09344 66.742208"></path><g class="vf-stavenote" id="vf-auto1000"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M53.75 57L53.75 90"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 55M53 56.6848C53 58.7908,54.74096 60.0544,56.9312 60.0544C60.52544 60.0544,64.934 56.74096,64.934 53.3152C64.934 51.23728,63.30536 49.9456,61.0028 49.9456C56.566159999999996 49.9456,53 53.23096,53 56.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1008"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M162.2665 52L162.2665 85"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M161.5165 50M161.5165 51.6848C161.5165 53.7908,163.25746 55.0544,165.4477 55.0544C169.04194 55.0544,173.4505 51.74096,173.4505 48.3152C173.4505 46.23728,171.82186000000002 44.9456,169.51930000000002 44.9456C165.08266 44.9456,161.5165 48.23096,161.5165 51.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1016"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M270.78299999999996 47L270.78299999999996 80"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M270.03299999999996 45M270.03299999999996 46.6848C270.03299999999996 48.7908,271.77395999999993 50.0544,273.96419999999995 50.0544C277.55843999999996 50.0544,281.967 46.74096,281.967 43.3152C281.967 41.23728,280.33835999999997 39.9456,278.03579999999994 39.9456C273.59916 39.9456,270.03299999999996 43.23096,270.03299999999996 46.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1024"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M379.29949999999997 42L379.29949999999997 75"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M378.54949999999997 40M378.54949999999997 41.6848C378.54949999999997 43.7908,380.29045999999994 45.0544,382.48069999999996 45.0544C386.07493999999997 45.0544,390.4835 41.74096,390.4835 38.3152C390.4835 36.23728,388.85486 34.9456,386.55229999999995 34.9456C382.11566 34.9456,378.54949999999997 38.23096,378.54949999999997 41.6848"></path></g></g><g class="vf-modifiers"></g></g><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="499" y="40" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="40" width="1" height="41"></rect></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('Stem attribute on note overrides stem attribute on voice', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-system>
          <vf-stave clef='treble' keySig='C'>
            <vf-voice>F4/q[id='1'], A4[id='2'], C5[id='3', stem='down'], E5[id='4', stem='down']</vf-voice>
          </vf-stave>
        </vf-system>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="130" viewBox="0 0 500 130" style="width: 500px; height: 130px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 40L499 40"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 50L499 50"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 60L499 60"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 70L499 70"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L499 80"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 71M28.280256 80.199872C29.116608 80.199872,30.079680000000003 80.12384,30.814656 79.971776C31.194816000000003 79.89574400000001,31.270848 79.8704,31.346880000000002 80.301248C31.777728 82.759616,32.335296 85.927616,32.335296 87.651008C32.335296 93.04928000000001,28.685760000000002 93.708224,26.53152 93.708224C24.554688 93.708224,23.61696 93.12531200000001,23.61696 92.643776C23.61696 92.390336,23.946432 92.28896,24.782784 92.010176C25.923264000000003 91.680704,27.215808000000003 90.71763200000001,27.215808000000003 88.588736C27.215808000000003 86.58656,25.948608 84.863168,23.718336 84.863168C21.285312 84.863168,19.81536 86.814656,19.81536 89.070272C19.81536 91.42726400000001,21.234624 95.026112,26.759616 95.026112C29.19264 95.026112,33.931968 93.910976,33.931968 87.72704C33.931968 85.62348800000001,33.27302400000001 82.176704,32.892864 79.89574400000001C32.816832000000005 79.464896,32.842176 79.515584,33.349056000000004 79.287488C37.04928 77.817536,39.482304 74.725568,39.482304 70.594496C39.482304 65.9312,36.060864 61.800128,30.687936 61.800128C29.750208 61.800128,29.750208 61.800128,29.623488000000002 61.141183999999996L28.711104 55.844288C28.660416 55.41344,28.711104 55.388096,28.9392 55.16C32.892864 51.485119999999995,35.883456 46.847167999999996,35.883456 41.246144C35.883456 38.078143999999995,34.996415999999996 34.935488,33.50112 32.755903999999994C32.943552 31.944896,32.005824000000004 30.931135999999995,31.60032 30.931135999999995C31.09344 30.931135999999995,29.95296 31.868863999999995,29.243328 32.679871999999996C26.53152 35.670463999999996,25.64448 40.232383999999996,25.64448 44.033984C25.64448 46.137536,25.923264000000003 48.519872,26.176704 50.015168C26.252736 50.446016,26.278080000000003 50.522048,25.847231999999998 50.902208C20.57568 55.236031999999994,15 60.456896,15 67.832C15 74.168,19.333824 80.199872,28.280256 80.199872M17.91456 70.265024C17.91456 68.110784,18.29472 65.221568,21.310656 61.800128C23.515584 59.367104,25.188288 57.998528,26.886336 56.629952C27.266496 56.325824,27.342528 56.376512,27.41856 56.756671999999995L28.17888 61.445312C28.280256 62.129599999999996,28.280256 62.104256,27.621312000000003 62.307007999999996C24.427968 63.3968,22.324416 66.286016,22.324416 69.403328C22.324416 72.672704,24.047808 75.004352,26.53152 75.866048C26.835648 75.967424,27.266496 76.0688,27.519936 76.0688C27.798720000000003 76.0688,27.950784 75.891392,27.950784 75.663296C27.950784 75.409856,27.672 75.30848,27.41856 75.207104C25.872576000000002 74.54816,24.782784 72.976832,24.782784 71.304128C24.782784 69.200576,26.202048 67.654592,28.43232 67.020992C29.015232 66.868928,29.091264000000002 66.919616,29.167296 67.32512L30.992064 78.19769600000001C31.068096 78.6032,31.017408 78.6032,30.485184000000004 78.704576C29.902272000000004 78.805952,29.167296 78.881984,28.43232 78.881984C22.045632 78.881984,17.91456 75.33382399999999,17.91456 70.265024M32.157888 36.582848C33.349056000000004 36.582848,34.337472000000005 37.571264,34.337472000000005 39.57344C34.337472000000005 43.628479999999996,30.865344 46.923199999999994,28.001472 49.432255999999995C27.748032000000002 49.660352,27.595968 49.609663999999995,27.519936 49.128128C27.367872 48.1904,27.29184 46.948544,27.29184 45.78272C27.29184 40.08032,29.927616 36.582848,32.157888 36.582848M31.09344 66.742208C34.058688000000004 66.995648,36.49171200000001 69.47936,36.49171200000001 72.672704C36.49171200000001 74.979008,35.097792 76.82912,33.070272 77.868224C32.639424000000005 78.070976,32.563392 78.070976,32.48736 77.640128L30.687936 67.249088C30.611904000000003 66.792896,30.662592000000004 66.69152,31.09344 66.742208"></path><g class="vf-stavenote" id="vf-1"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M64.184 75L64.184 40"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 75M53 76.6848C53 78.7908,54.74096 80.0544,56.9312 80.0544C60.52544 80.0544,64.934 76.74096,64.934 73.3152C64.934 71.23728,63.30536 69.9456,61.0028 69.9456C56.566159999999996 69.9456,53 73.23096,53 76.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-2"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M172.7005 65L172.7005 30"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M161.5165 65M161.5165 66.6848C161.5165 68.7908,163.25746 70.0544,165.4477 70.0544C169.04194 70.0544,173.4505 66.74096,173.4505 63.3152C173.4505 61.23728,171.82186000000002 59.9456,169.51930000000002 59.9456C165.08266 59.9456,161.5165 63.23096,161.5165 66.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-3"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M270.78299999999996 57L270.78299999999996 90"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M270.03299999999996 55M270.03299999999996 56.6848C270.03299999999996 58.7908,271.77395999999993 60.0544,273.96419999999995 60.0544C277.55843999999996 60.0544,281.967 56.74096,281.967 53.3152C281.967 51.23728,280.33835999999997 49.9456,278.03579999999994 49.9456C273.59916 49.9456,270.03299999999996 53.23096,270.03299999999996 56.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-4"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M379.29949999999997 47L379.29949999999997 80"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M378.54949999999997 45M378.54949999999997 46.6848C378.54949999999997 48.7908,380.29045999999994 50.0544,382.48069999999996 50.0544C386.07493999999997 50.0544,390.4835 46.74096,390.4835 43.3152C390.4835 41.23728,388.85486 39.9456,386.55229999999995 39.9456C382.11566 39.9456,378.54949999999997 43.23096,378.54949999999997 46.6848"></path></g></g><g class="vf-modifiers"></g></g><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="499" y="40" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="40" width="1" height="41"></rect></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('Simple accidentals (flats) render correctly', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-system>
          <vf-stave clef='treble' keySig='C'>
            <vf-voice>C4/q[id='1'], Db4[id='2'], Eb4[id='3'], F4[id='4']</vf-voice>
          </vf-stave>
        </vf-system>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="130" viewBox="0 0 500 130" style="width: 500px; height: 130px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 40L499 40"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 50L499 50"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 60L499 60"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 70L499 70"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L499 80"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 71M28.280256 80.199872C29.116608 80.199872,30.079680000000003 80.12384,30.814656 79.971776C31.194816000000003 79.89574400000001,31.270848 79.8704,31.346880000000002 80.301248C31.777728 82.759616,32.335296 85.927616,32.335296 87.651008C32.335296 93.04928000000001,28.685760000000002 93.708224,26.53152 93.708224C24.554688 93.708224,23.61696 93.12531200000001,23.61696 92.643776C23.61696 92.390336,23.946432 92.28896,24.782784 92.010176C25.923264000000003 91.680704,27.215808000000003 90.71763200000001,27.215808000000003 88.588736C27.215808000000003 86.58656,25.948608 84.863168,23.718336 84.863168C21.285312 84.863168,19.81536 86.814656,19.81536 89.070272C19.81536 91.42726400000001,21.234624 95.026112,26.759616 95.026112C29.19264 95.026112,33.931968 93.910976,33.931968 87.72704C33.931968 85.62348800000001,33.27302400000001 82.176704,32.892864 79.89574400000001C32.816832000000005 79.464896,32.842176 79.515584,33.349056000000004 79.287488C37.04928 77.817536,39.482304 74.725568,39.482304 70.594496C39.482304 65.9312,36.060864 61.800128,30.687936 61.800128C29.750208 61.800128,29.750208 61.800128,29.623488000000002 61.141183999999996L28.711104 55.844288C28.660416 55.41344,28.711104 55.388096,28.9392 55.16C32.892864 51.485119999999995,35.883456 46.847167999999996,35.883456 41.246144C35.883456 38.078143999999995,34.996415999999996 34.935488,33.50112 32.755903999999994C32.943552 31.944896,32.005824000000004 30.931135999999995,31.60032 30.931135999999995C31.09344 30.931135999999995,29.95296 31.868863999999995,29.243328 32.679871999999996C26.53152 35.670463999999996,25.64448 40.232383999999996,25.64448 44.033984C25.64448 46.137536,25.923264000000003 48.519872,26.176704 50.015168C26.252736 50.446016,26.278080000000003 50.522048,25.847231999999998 50.902208C20.57568 55.236031999999994,15 60.456896,15 67.832C15 74.168,19.333824 80.199872,28.280256 80.199872M17.91456 70.265024C17.91456 68.110784,18.29472 65.221568,21.310656 61.800128C23.515584 59.367104,25.188288 57.998528,26.886336 56.629952C27.266496 56.325824,27.342528 56.376512,27.41856 56.756671999999995L28.17888 61.445312C28.280256 62.129599999999996,28.280256 62.104256,27.621312000000003 62.307007999999996C24.427968 63.3968,22.324416 66.286016,22.324416 69.403328C22.324416 72.672704,24.047808 75.004352,26.53152 75.866048C26.835648 75.967424,27.266496 76.0688,27.519936 76.0688C27.798720000000003 76.0688,27.950784 75.891392,27.950784 75.663296C27.950784 75.409856,27.672 75.30848,27.41856 75.207104C25.872576000000002 74.54816,24.782784 72.976832,24.782784 71.304128C24.782784 69.200576,26.202048 67.654592,28.43232 67.020992C29.015232 66.868928,29.091264000000002 66.919616,29.167296 67.32512L30.992064 78.19769600000001C31.068096 78.6032,31.017408 78.6032,30.485184000000004 78.704576C29.902272000000004 78.805952,29.167296 78.881984,28.43232 78.881984C22.045632 78.881984,17.91456 75.33382399999999,17.91456 70.265024M32.157888 36.582848C33.349056000000004 36.582848,34.337472000000005 37.571264,34.337472000000005 39.57344C34.337472000000005 43.628479999999996,30.865344 46.923199999999994,28.001472 49.432255999999995C27.748032000000002 49.660352,27.595968 49.609663999999995,27.519936 49.128128C27.367872 48.1904,27.29184 46.948544,27.29184 45.78272C27.29184 40.08032,29.927616 36.582848,32.157888 36.582848M31.09344 66.742208C34.058688000000004 66.995648,36.49171200000001 69.47936,36.49171200000001 72.672704C36.49171200000001 74.979008,35.097792 76.82912,33.070272 77.868224C32.639424000000005 78.070976,32.563392 78.070976,32.48736 77.640128L30.687936 67.249088C30.611904000000003 66.792896,30.662592000000004 66.69152,31.09344 66.742208"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M50 90L67.934 90"></path><g class="vf-stavenote" id="vf-1"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M64.184 90L64.184 55"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 90M53 91.6848C53 93.7908,54.74096 95.0544,56.9312 95.0544C60.52544 95.0544,64.934 91.74096,64.934 88.3152C64.934 86.23728,63.30536 84.9456,61.0028 84.9456C56.566159999999996 84.9456,53 88.23096,53 91.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-2"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M172.70049999999998 85L172.70049999999998 50"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M161.51649999999998 85M161.51649999999998 86.6848C161.51649999999998 88.7908,163.25745999999998 90.0544,165.44769999999997 90.0544C169.04193999999998 90.0544,173.45049999999998 86.74096,173.45049999999998 83.3152C173.45049999999998 81.23728,171.82186 79.9456,169.5193 79.9456C165.08265999999998 79.9456,161.51649999999998 83.23096,161.51649999999998 86.6848"></path></g></g><g class="vf-modifiers"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M149.62449999999998 85M150.08962 91.7032C150.22642 91.86736,150.33586 91.89472,150.44529999999997 91.89472C150.5821 91.89472,150.69153999999997 91.81264,150.69153999999997 91.81264C151.86801999999997 91.156,152.82562 90.08896,153.81058 89.40496C157.31266 86.96992,158.51649999999998 84.56224,158.51649999999998 82.75648C158.51649999999998 80.51296,156.79281999999998 79.09024,154.98705999999999 78.9808C154.30306 78.9808,153.37282 79.28176,152.82562 79.63744C152.57938 79.82896,152.14162 80.18464,151.9501 80.18464C151.86801999999997 80.18464,151.84065999999999 80.18464,151.75858 80.15728C151.48497999999998 80.04784,151.32081999999997 79.74688,151.32081999999997 79.47328C151.34817999999999 78.62512,151.59441999999999 69.15856,151.59441999999999 68.36512C151.59441999999999 67.92736,151.23873999999998 67.70848000000001,150.85569999999998 67.70848000000001C150.28114 67.70848000000001,149.65185999999997 68.09152,149.62449999999998 68.80288C149.62449999999998 68.80288,149.78866 91.2928,150.08962 91.7032M151.43025999999998 83.00272C151.70386 82.20928,153.29073999999997 81.06016,154.19361999999998 81.06016C155.34274 81.06016,155.80785999999998 82.37344,155.80785999999998 83.3584C155.80785999999998 85.46512,154.00209999999998 87.5992,152.30577999999997 88.66624C152.14162 88.74832,152.03217999999998 88.77568,151.92273999999998 88.77568C151.56705999999997 88.77568,151.48497999999998 88.39264,151.48497999999998 88.20112C151.48497999999998 88.20112,151.34817999999999 85.8208,151.34817999999999 84.26128C151.34817999999999 83.632,151.4029 83.13952,151.43025999999998 83.00272"></path></g></g><g class="vf-stavenote" id="vf-3"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M281.217 80L281.217 45"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M270.03299999999996 80M270.03299999999996 81.6848C270.03299999999996 83.7908,271.77395999999993 85.0544,273.96419999999995 85.0544C277.55843999999996 85.0544,281.967 81.74096,281.967 78.3152C281.967 76.23728,280.33835999999997 74.9456,278.03579999999994 74.9456C273.59916 74.9456,270.03299999999996 78.23096,270.03299999999996 81.6848"></path></g></g><g class="vf-modifiers"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M258.14099999999996 80M258.60612 86.7032C258.74291999999997 86.86736,258.85236 86.89472,258.9618 86.89472C259.0986 86.89472,259.20804 86.81264,259.20804 86.81264C260.38451999999995 86.156,261.34211999999997 85.08896,262.32707999999997 84.40496C265.82915999999994 81.96992,267.03299999999996 79.56224,267.03299999999996 77.75648C267.03299999999996 75.51296,265.30931999999996 74.09024,263.50355999999994 73.9808C262.81955999999997 73.9808,261.88931999999994 74.28176,261.34211999999997 74.63744C261.09587999999997 74.82896,260.65811999999994 75.18464,260.46659999999997 75.18464C260.38451999999995 75.18464,260.35715999999996 75.18464,260.27507999999995 75.15728C260.00147999999996 75.04784,259.83732 74.74688,259.83732 74.47328C259.86467999999996 73.62512,260.11091999999996 64.15856,260.11091999999996 63.365120000000005C260.11091999999996 62.92736,259.75523999999996 62.70848,259.37219999999996 62.70848C258.79763999999994 62.70848,258.16835999999995 63.09152,258.14099999999996 63.80288C258.14099999999996 63.80288,258.30515999999994 86.2928,258.60612 86.7032M259.94676 78.00272C260.22035999999997 77.20928,261.80724 76.06016,262.71011999999996 76.06016C263.85923999999994 76.06016,264.32435999999996 77.37344,264.32435999999996 78.3584C264.32435999999996 80.46512,262.51859999999994 82.5992,260.82228 83.66624C260.65811999999994 83.74832,260.54868 83.77568,260.43924 83.77568C260.08356 83.77568,260.00147999999996 83.39264,260.00147999999996 83.20112C260.00147999999996 83.20112,259.86467999999996 80.8208,259.86467999999996 79.26128C259.86467999999996 78.632,259.91939999999994 78.13952,259.94676 78.00272"></path></g></g><g class="vf-stavenote" id="vf-4"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M389.7335 75L389.7335 40"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M378.54949999999997 75M378.54949999999997 76.6848C378.54949999999997 78.7908,380.29045999999994 80.0544,382.48069999999996 80.0544C386.07493999999997 80.0544,390.4835 76.74096,390.4835 73.3152C390.4835 71.23728,388.85486 69.9456,386.55229999999995 69.9456C382.11566 69.9456,378.54949999999997 73.23096,378.54949999999997 76.6848"></path></g></g><g class="vf-modifiers"></g></g><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="499" y="40" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="40" width="1" height="41"></rect></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('Simple accidentals (sharps) render correctly', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-system>
          <vf-stave clef='treble' keySig='C'>
            <vf-voice>G4/q, A4, B4, C#5</vf-voice>
          </vf-stave>
        </vf-system>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="130" viewBox="0 0 500 130" style="width: 500px; height: 130px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 40L499 40"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 50L499 50"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 60L499 60"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 70L499 70"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L499 80"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 71M28.280256 80.199872C29.116608 80.199872,30.079680000000003 80.12384,30.814656 79.971776C31.194816000000003 79.89574400000001,31.270848 79.8704,31.346880000000002 80.301248C31.777728 82.759616,32.335296 85.927616,32.335296 87.651008C32.335296 93.04928000000001,28.685760000000002 93.708224,26.53152 93.708224C24.554688 93.708224,23.61696 93.12531200000001,23.61696 92.643776C23.61696 92.390336,23.946432 92.28896,24.782784 92.010176C25.923264000000003 91.680704,27.215808000000003 90.71763200000001,27.215808000000003 88.588736C27.215808000000003 86.58656,25.948608 84.863168,23.718336 84.863168C21.285312 84.863168,19.81536 86.814656,19.81536 89.070272C19.81536 91.42726400000001,21.234624 95.026112,26.759616 95.026112C29.19264 95.026112,33.931968 93.910976,33.931968 87.72704C33.931968 85.62348800000001,33.27302400000001 82.176704,32.892864 79.89574400000001C32.816832000000005 79.464896,32.842176 79.515584,33.349056000000004 79.287488C37.04928 77.817536,39.482304 74.725568,39.482304 70.594496C39.482304 65.9312,36.060864 61.800128,30.687936 61.800128C29.750208 61.800128,29.750208 61.800128,29.623488000000002 61.141183999999996L28.711104 55.844288C28.660416 55.41344,28.711104 55.388096,28.9392 55.16C32.892864 51.485119999999995,35.883456 46.847167999999996,35.883456 41.246144C35.883456 38.078143999999995,34.996415999999996 34.935488,33.50112 32.755903999999994C32.943552 31.944896,32.005824000000004 30.931135999999995,31.60032 30.931135999999995C31.09344 30.931135999999995,29.95296 31.868863999999995,29.243328 32.679871999999996C26.53152 35.670463999999996,25.64448 40.232383999999996,25.64448 44.033984C25.64448 46.137536,25.923264000000003 48.519872,26.176704 50.015168C26.252736 50.446016,26.278080000000003 50.522048,25.847231999999998 50.902208C20.57568 55.236031999999994,15 60.456896,15 67.832C15 74.168,19.333824 80.199872,28.280256 80.199872M17.91456 70.265024C17.91456 68.110784,18.29472 65.221568,21.310656 61.800128C23.515584 59.367104,25.188288 57.998528,26.886336 56.629952C27.266496 56.325824,27.342528 56.376512,27.41856 56.756671999999995L28.17888 61.445312C28.280256 62.129599999999996,28.280256 62.104256,27.621312000000003 62.307007999999996C24.427968 63.3968,22.324416 66.286016,22.324416 69.403328C22.324416 72.672704,24.047808 75.004352,26.53152 75.866048C26.835648 75.967424,27.266496 76.0688,27.519936 76.0688C27.798720000000003 76.0688,27.950784 75.891392,27.950784 75.663296C27.950784 75.409856,27.672 75.30848,27.41856 75.207104C25.872576000000002 74.54816,24.782784 72.976832,24.782784 71.304128C24.782784 69.200576,26.202048 67.654592,28.43232 67.020992C29.015232 66.868928,29.091264000000002 66.919616,29.167296 67.32512L30.992064 78.19769600000001C31.068096 78.6032,31.017408 78.6032,30.485184000000004 78.704576C29.902272000000004 78.805952,29.167296 78.881984,28.43232 78.881984C22.045632 78.881984,17.91456 75.33382399999999,17.91456 70.265024M32.157888 36.582848C33.349056000000004 36.582848,34.337472000000005 37.571264,34.337472000000005 39.57344C34.337472000000005 43.628479999999996,30.865344 46.923199999999994,28.001472 49.432255999999995C27.748032000000002 49.660352,27.595968 49.609663999999995,27.519936 49.128128C27.367872 48.1904,27.29184 46.948544,27.29184 45.78272C27.29184 40.08032,29.927616 36.582848,32.157888 36.582848M31.09344 66.742208C34.058688000000004 66.995648,36.49171200000001 69.47936,36.49171200000001 72.672704C36.49171200000001 74.979008,35.097792 76.82912,33.070272 77.868224C32.639424000000005 78.070976,32.563392 78.070976,32.48736 77.640128L30.687936 67.249088C30.611904000000003 66.792896,30.662592000000004 66.69152,31.09344 66.742208"></path><g class="vf-stavenote" id="vf-auto1000"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M64.184 70L64.184 35"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M53 70M53 71.6848C53 73.7908,54.74096 75.0544,56.9312 75.0544C60.52544 75.0544,64.934 71.74096,64.934 68.3152C64.934 66.23728,63.30536 64.9456,61.0028 64.9456C56.566159999999996 64.9456,53 68.23096,53 71.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1008"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M172.7005 65L172.7005 30"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M161.5165 65M161.5165 66.6848C161.5165 68.7908,163.25746 70.0544,165.4477 70.0544C169.04194 70.0544,173.4505 66.74096,173.4505 63.3152C173.4505 61.23728,171.82186000000002 59.9456,169.51930000000002 59.9456C165.08266 59.9456,161.5165 63.23096,161.5165 66.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1016"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M281.217 60L281.217 25"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M270.03299999999996 60M270.03299999999996 61.6848C270.03299999999996 63.7908,271.77395999999993 65.0544,273.96419999999995 65.0544C277.55843999999996 65.0544,281.967 61.74096,281.967 58.3152C281.967 56.23728,280.33835999999997 54.9456,278.03579999999994 54.9456C273.59916 54.9456,270.03299999999996 58.23096,270.03299999999996 61.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1024"><g class="vf-note" pointer-events="bounding-box"><g class="vf-stem" pointer-events="bounding-box"><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M389.7335 55L389.7335 20"></path></g><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M378.54949999999997 55M378.54949999999997 56.6848C378.54949999999997 58.7908,380.29045999999994 60.0544,382.48069999999996 60.0544C386.07493999999997 60.0544,390.4835 56.74096,390.4835 53.3152C390.4835 51.23728,388.85486 49.9456,386.55229999999995 49.9456C382.11566 49.9456,378.54949999999997 53.23096,378.54949999999997 56.6848"></path></g></g><g class="vf-modifiers"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M365.72725999999994 55M366.05557999999996 53.98768C366.19237999999996 53.98768,366.95845999999995 53.632,367.06789999999995 53.54992C367.09525999999994 53.54992,367.14997999999997 53.4952,367.17733999999996 53.4952C367.45093999999995 53.4952,367.69717999999995 53.9056,367.69717999999995 54.20656L367.69717999999995 58.11904C367.69717999999995 58.5568,367.5056599999999 58.91248,367.2594199999999 59.02192C367.04053999999996 59.104,366.19237999999996 59.45968,366.19237999999996 59.45968C365.91877999999997 59.54176,365.72725999999994 59.84272,365.72725999999994 60.08896L365.72725999999994 62.87968C365.72725999999994 63.12592,365.83669999999995 63.23536,366.05557999999996 63.23536C366.08293999999995 63.23536,366.16501999999997 63.208,366.19237999999996 63.208C366.19237999999996 63.208,366.73957999999993 62.96176,367.09525999999994 62.85232C367.14997999999997 62.7976,367.17733999999996 62.7976,367.23205999999993 62.7976C367.5056599999999 62.7976,367.69717999999995 63.23536,367.69717999999995 63.42688L367.69717999999995 68.2696C367.69717999999995 68.51584,367.94341999999995 68.70736,368.21701999999993 68.70736C368.6000599999999 68.70736,368.87366 68.51584,368.87366 68.2696L368.87366 62.7976C368.87366 62.27776,369.06517999999994 62.00416,369.28405999999995 61.92208L371.66437999999994 60.93712C371.71909999999997 60.93712,371.80117999999993 60.90976,371.8285399999999 60.90976C372.15685999999994 60.90976,372.34837999999996 61.37488,372.34837999999996 61.62112L372.34837999999996 66.54592C372.34837999999996 66.79216,372.59461999999996 66.98367999999999,372.86821999999995 66.98367999999999C373.27861999999993 66.98367999999999,373.52485999999993 66.79216,373.52485999999993 66.54592L373.52485999999993 60.93712C373.52485999999993 60.63616,373.68901999999997 60.17104,373.96261999999996 60.03424C374.23621999999995 59.9248,375.05701999999997 59.59648,375.05701999999997 59.59648C375.33061999999995 59.48704,375.54949999999997 59.18608,375.54949999999997 58.93984L375.54949999999997 56.149119999999996C375.54949999999997 55.9576,375.4127 55.8208,375.24853999999993 55.8208C375.19381999999996 55.8208,375.1390999999999 55.8208,375.05701999999997 55.87552L374.0446999999999 56.25856C373.7984599999999 56.25856,373.52485999999993 56.01232,373.52485999999993 55.5472L373.52485999999993 51.88096C373.52485999999993 51.60736,373.71637999999996 50.86864,374.0446999999999 50.73184L375.05701999999997 50.3488C375.33061999999995 50.23936,375.54949999999997 49.91104,375.54949999999997 49.69216L375.54949999999997 46.87408C375.54949999999997 46.68256,375.4127 46.57312,375.24853999999993 46.57312C375.19381999999996 46.57312,375.1390999999999 46.57312,375.05701999999997 46.600480000000005C375.05701999999997 46.600480000000005,374.26357999999993 46.9288,374.07205999999996 46.95616C373.7984599999999 46.95616,373.52485999999993 46.76464,373.52485999999993 46.46368L373.52485999999993 41.64832C373.52485999999993 41.40208,373.27861999999993 41.21056,372.97765999999996 41.21056C372.59461999999996 41.21056,372.34837999999996 41.40208,372.34837999999996 41.64832L372.34837999999996 46.76464C372.29365999999993 47.14768,372.1842199999999 47.66752,371.8285399999999 47.913759999999996C371.36341999999996 48.18736,370.02277999999995 48.73456,369.33877999999993 48.89872C369.01045999999997 48.89872,368.87366 48.4336,368.87366 48.10528L368.87366 43.372C368.87366 43.15312,368.6000599999999 42.93424,368.32645999999994 42.93424C367.94341999999995 42.93424,367.69717999999995 43.15312,367.69717999999995 43.372L367.69717999999995 48.7072C367.69717999999995 49.254400000000004,367.45093999999995 49.63744,367.23205999999993 49.74688C366.98581999999993 49.88368,366.19237999999996 50.18464,366.19237999999996 50.18464C365.91877999999997 50.26672,365.72725999999994 50.59504,365.72725999999994 50.81392L365.72725999999994 53.632C365.72725999999994 53.850880000000004,365.83669999999995 53.98768,366.05557999999996 53.98768M368.76421999999997 56.17648C368.76421999999997 54.97264,368.79157999999995 53.57728,368.87366 53.27632C368.95573999999993 52.59232,370.76149999999996 51.77152,371.74645999999996 51.77152C372.02005999999994 51.77152,372.26629999999994 51.8536,372.34837999999996 52.01776C372.4304599999999 52.20928,372.51253999999994 53.19424,372.51253999999994 54.26128C372.51253999999994 55.32832,372.4304599999999 56.42272,372.34837999999996 56.7784C372.10213999999996 57.57184,370.26901999999995 58.33792,369.33877999999993 58.33792C369.1198999999999 58.33792,368.92837999999995 58.2832,368.87366 58.1464C368.79157999999995 57.98224,368.76421999999997 57.13408,368.76421999999997 56.17648"></path></g></g><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="499" y="40" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="40" width="1" height="41"></rect></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });

  it('Notes are autobeamed if attribute is present', async() => {
    const el = await fixture(html`
      <vf-score>
        <vf-system>
          <vf-stave clef='treble' timeSig='4/4'>
            <vf-voice stem='down' autoBeam>c4/8, f5, d5, g5, d6/8, f5, d5, g5</vf-voice>
          </vf-stave>
        </vf-system>
      </vf-score>
    `);

    const expected = '<div id="vf-score"><slot></slot><svg width="500" height="130" viewBox="0 0 500 130" style="width: 500px; height: 130px;"><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 40L499 40"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 50L499 50"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 60L499 60"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 70L499 70"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M10 80L499 80"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M15 71M28.280256 80.199872C29.116608 80.199872,30.079680000000003 80.12384,30.814656 79.971776C31.194816000000003 79.89574400000001,31.270848 79.8704,31.346880000000002 80.301248C31.777728 82.759616,32.335296 85.927616,32.335296 87.651008C32.335296 93.04928000000001,28.685760000000002 93.708224,26.53152 93.708224C24.554688 93.708224,23.61696 93.12531200000001,23.61696 92.643776C23.61696 92.390336,23.946432 92.28896,24.782784 92.010176C25.923264000000003 91.680704,27.215808000000003 90.71763200000001,27.215808000000003 88.588736C27.215808000000003 86.58656,25.948608 84.863168,23.718336 84.863168C21.285312 84.863168,19.81536 86.814656,19.81536 89.070272C19.81536 91.42726400000001,21.234624 95.026112,26.759616 95.026112C29.19264 95.026112,33.931968 93.910976,33.931968 87.72704C33.931968 85.62348800000001,33.27302400000001 82.176704,32.892864 79.89574400000001C32.816832000000005 79.464896,32.842176 79.515584,33.349056000000004 79.287488C37.04928 77.817536,39.482304 74.725568,39.482304 70.594496C39.482304 65.9312,36.060864 61.800128,30.687936 61.800128C29.750208 61.800128,29.750208 61.800128,29.623488000000002 61.141183999999996L28.711104 55.844288C28.660416 55.41344,28.711104 55.388096,28.9392 55.16C32.892864 51.485119999999995,35.883456 46.847167999999996,35.883456 41.246144C35.883456 38.078143999999995,34.996415999999996 34.935488,33.50112 32.755903999999994C32.943552 31.944896,32.005824000000004 30.931135999999995,31.60032 30.931135999999995C31.09344 30.931135999999995,29.95296 31.868863999999995,29.243328 32.679871999999996C26.53152 35.670463999999996,25.64448 40.232383999999996,25.64448 44.033984C25.64448 46.137536,25.923264000000003 48.519872,26.176704 50.015168C26.252736 50.446016,26.278080000000003 50.522048,25.847231999999998 50.902208C20.57568 55.236031999999994,15 60.456896,15 67.832C15 74.168,19.333824 80.199872,28.280256 80.199872M17.91456 70.265024C17.91456 68.110784,18.29472 65.221568,21.310656 61.800128C23.515584 59.367104,25.188288 57.998528,26.886336 56.629952C27.266496 56.325824,27.342528 56.376512,27.41856 56.756671999999995L28.17888 61.445312C28.280256 62.129599999999996,28.280256 62.104256,27.621312000000003 62.307007999999996C24.427968 63.3968,22.324416 66.286016,22.324416 69.403328C22.324416 72.672704,24.047808 75.004352,26.53152 75.866048C26.835648 75.967424,27.266496 76.0688,27.519936 76.0688C27.798720000000003 76.0688,27.950784 75.891392,27.950784 75.663296C27.950784 75.409856,27.672 75.30848,27.41856 75.207104C25.872576000000002 74.54816,24.782784 72.976832,24.782784 71.304128C24.782784 69.200576,26.202048 67.654592,28.43232 67.020992C29.015232 66.868928,29.091264000000002 66.919616,29.167296 67.32512L30.992064 78.19769600000001C31.068096 78.6032,31.017408 78.6032,30.485184000000004 78.704576C29.902272000000004 78.805952,29.167296 78.881984,28.43232 78.881984C22.045632 78.881984,17.91456 75.33382399999999,17.91456 70.265024M32.157888 36.582848C33.349056000000004 36.582848,34.337472000000005 37.571264,34.337472000000005 39.57344C34.337472000000005 43.628479999999996,30.865344 46.923199999999994,28.001472 49.432255999999995C27.748032000000002 49.660352,27.595968 49.609663999999995,27.519936 49.128128C27.367872 48.1904,27.29184 46.948544,27.29184 45.78272C27.29184 40.08032,29.927616 36.582848,32.157888 36.582848M31.09344 66.742208C34.058688000000004 66.995648,36.49171200000001 69.47936,36.49171200000001 72.672704C36.49171200000001 74.979008,35.097792 76.82912,33.070272 77.868224C32.639424000000005 78.070976,32.563392 78.070976,32.48736 77.640128L30.687936 67.249088C30.611904000000003 66.792896,30.662592000000004 66.69152,31.09344 66.742208"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M56 50M57.41984 53.94128L63.956 53.94128L63.956 56.16896C63.956 57.12368,63.19712 57.39296,62.56064 57.39296C61.9976 57.39296,61.7528 57.7112,61.7528 58.0784C61.7528 58.42112,61.8752 58.812799999999996,62.413759999999996 58.812799999999996L69.92912 58.812799999999996C70.27184 58.812799999999996,70.63904 58.568,70.63904 58.0784C70.63904 57.5888,70.19839999999999 57.36848,69.85568 57.36848C69.51295999999999 57.36848,68.75408 57.14816,68.75408 56.02208L68.75408 53.94128L71.32448 53.94128C71.69167999999999 53.94128,71.86304 53.69648,71.86304 53.28032C71.86304 52.86416,71.71616 52.61936,71.32448 52.61936L68.75408 52.61936L68.75408 45.05504C68.75408 44.78576,68.7296 44.46752,68.33792 44.46752C68.01968 44.46752,67.84832 44.54096,67.628 44.78576L64.27423999999999 48.82496C64.15183999999999 49.0208,63.956 49.21664,63.956 49.65728L63.956 52.61936L59.20688 52.61936C62.02208 50.22032,67.67696 42.215360000000004,67.77488 41.82368C67.77488 41.75024,67.79936 41.72576,67.79936 41.65232C67.79936 41.35856,67.55456 41.16272,67.28528 41.16272C66.96704 41.16272,65.52271999999999 41.21168,64.88624 41.21168C64.24976 41.21168,62.65856 41.16272,62.38928 41.16272C62.071039999999996 41.16272,61.58144 41.26064,61.58144 41.82368C61.58144 46.18112,58.10528 51.1016,57.05264 52.5704L56.8568 52.86416C56.8568 52.88864,56.80784 52.9376,56.80784 52.96208C56.7344 53.108959999999996,56.70992 53.23136,56.70992 53.35376C56.70992 53.69648,56.9792 53.94128,57.41984 53.94128"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M56 70M57.41984 73.94128L63.956 73.94128L63.956 76.16896C63.956 77.12368,63.19712 77.39296,62.56064 77.39296C61.9976 77.39296,61.7528 77.7112,61.7528 78.0784C61.7528 78.42112,61.8752 78.8128,62.413759999999996 78.8128L69.92912 78.8128C70.27184 78.8128,70.63904 78.568,70.63904 78.0784C70.63904 77.58879999999999,70.19839999999999 77.36848,69.85568 77.36848C69.51295999999999 77.36848,68.75408 77.14816,68.75408 76.02208L68.75408 73.94128L71.32448 73.94128C71.69167999999999 73.94128,71.86304 73.69648,71.86304 73.28032C71.86304 72.86416,71.71616 72.61936,71.32448 72.61936L68.75408 72.61936L68.75408 65.05504C68.75408 64.78576,68.7296 64.46752000000001,68.33792 64.46752000000001C68.01968 64.46752000000001,67.84832 64.54096,67.628 64.78576L64.27423999999999 68.82496C64.15183999999999 69.0208,63.956 69.21664,63.956 69.65728L63.956 72.61936L59.20688 72.61936C62.02208 70.22032,67.67696 62.215360000000004,67.77488 61.82368C67.77488 61.75024,67.79936 61.72576,67.79936 61.65232C67.79936 61.35856,67.55456 61.16272,67.28528 61.16272C66.96704 61.16272,65.52271999999999 61.21168,64.88624 61.21168C64.24976 61.21168,62.65856 61.16272,62.38928 61.16272C62.071039999999996 61.16272,61.58144 61.26064,61.58144 61.82368C61.58144 66.18112,58.10528 71.1016,57.05264 72.5704L56.8568 72.86416C56.8568 72.88864,56.80784 72.9376,56.80784 72.96208C56.7344 73.10896,56.70992 73.23136,56.70992 73.35376C56.70992 73.69648,56.9792 73.94128,57.41984 73.94128"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M80.15312 90L98.08712 90"></path><g class="vf-stavenote" id="vf-auto1000"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M83.15312 90M83.15312 91.6848C83.15312 93.7908,84.89408 95.0544,87.08432 95.0544C90.67856 95.0544,95.08712 91.74096,95.08712 88.3152C95.08712 86.23728,93.45848000000001 84.9456,91.15592000000001 84.9456C86.71928 84.9456,83.15312 88.23096,83.15312 91.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1010"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M133.64222999999998 40M133.64222999999998 41.6848C133.64222999999998 43.7908,135.38318999999998 45.0544,137.57342999999997 45.0544C141.16767 45.0544,145.57622999999998 41.74096,145.57622999999998 38.3152C145.57622999999998 36.23728,143.94759 34.9456,141.64503 34.9456C137.20838999999998 34.9456,133.64222999999998 38.23096,133.64222999999998 41.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1020"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M184.13133999999997 50M184.13133999999997 51.6848C184.13133999999997 53.7908,185.87229999999997 55.0544,188.06253999999996 55.0544C191.65677999999997 55.0544,196.06533999999996 51.74096,196.06533999999996 48.3152C196.06533999999996 46.23728,194.43669999999997 44.9456,192.13413999999997 44.9456C187.69749999999996 44.9456,184.13133999999997 48.23096,184.13133999999997 51.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1030"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M234.62044999999995 35M234.62044999999995 36.6848C234.62044999999995 38.7908,236.36140999999995 40.0544,238.55164999999994 40.0544C242.14588999999995 40.0544,246.55444999999995 36.74096,246.55444999999995 33.3152C246.55444999999995 31.23728,244.92580999999996 29.9456,242.62324999999996 29.9456C238.18660999999994 29.9456,234.62044999999995 33.23096,234.62044999999995 36.6848"></path></g></g><g class="vf-modifiers"></g></g><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M282.10955999999993 30L300.04355999999996 30"></path><path stroke-width="1" fill="none" stroke="#999999" stroke-dasharray="none" d="M282.10955999999993 20L300.04355999999996 20"></path><g class="vf-stavenote" id="vf-auto1040"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M285.10955999999993 15M285.10955999999993 16.6848C285.10955999999993 18.7908,286.8505199999999 20.0544,289.0407599999999 20.0544C292.63499999999993 20.0544,297.04355999999996 16.74096,297.04355999999996 13.3152C297.04355999999996 11.23728,295.41491999999994 9.945599999999999,293.1123599999999 9.945599999999999C288.67571999999996 9.945599999999999,285.10955999999993 13.23096,285.10955999999993 16.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1050"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M335.5986699999999 40M335.5986699999999 41.6848C335.5986699999999 43.7908,337.3396299999999 45.0544,339.5298699999999 45.0544C343.1241099999999 45.0544,347.53266999999994 41.74096,347.53266999999994 38.3152C347.53266999999994 36.23728,345.9040299999999 34.9456,343.6014699999999 34.9456C339.16482999999994 34.9456,335.5986699999999 38.23096,335.5986699999999 41.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1060"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M386.0877799999999 50M386.0877799999999 51.6848C386.0877799999999 53.7908,387.82873999999987 55.0544,390.0189799999999 55.0544C393.6132199999999 55.0544,398.0217799999999 51.74096,398.0217799999999 48.3152C398.0217799999999 46.23728,396.3931399999999 44.9456,394.0905799999999 44.9456C389.6539399999999 44.9456,386.0877799999999 48.23096,386.0877799999999 51.6848"></path></g></g><g class="vf-modifiers"></g></g><g class="vf-stavenote" id="vf-auto1070"><g class="vf-note" pointer-events="bounding-box"><g class="vf-notehead" pointer-events="bounding-box"><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M436.5768899999999 35M436.5768899999999 36.6848C436.5768899999999 38.7908,438.31784999999985 40.0544,440.50808999999987 40.0544C444.1023299999999 40.0544,448.5108899999999 36.74096,448.5108899999999 33.3152C448.5108899999999 31.23728,446.8822499999999 29.9456,444.57968999999986 29.9456C440.1430499999999 29.9456,436.5768899999999 33.23096,436.5768899999999 36.6848"></path></g></g><g class="vf-modifiers"></g></g><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M94.33712 90L94.33712 18.372277499999996"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M144.82622999999998 40L144.82622999999998 5.75"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M93.58712 17.809777499999996L93.58712 22.809777499999996L145.07622999999998 10.1875L145.07622999999998 5.1875Z"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M184.88133999999997 52L184.88133999999997 84.25"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M235.37044999999995 37L235.37044999999995 76.67663350000001"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M184.13133999999997 85.1125L184.13133999999997 80.1125L235.62044999999995 72.5391335L235.62044999999995 77.5391335Z"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M285.85955999999993 17L285.85955999999993 61.627722500000004"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M336.3486699999999 42L336.3486699999999 74.25"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M285.10955999999993 62.190222500000004L285.10955999999993 57.190222500000004L336.5986699999999 69.8125L336.5986699999999 74.8125Z"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M386.8377799999999 52L386.8377799999999 84.25"></path><path stroke-width="1.5" fill="none" stroke="black" stroke-dasharray="none" d="M437.3268899999999 37L437.3268899999999 76.67663350000001"></path><path stroke-width="0.3" fill="black" stroke="none" stroke-dasharray="none" d="M386.0877799999999 85.1125L386.0877799999999 80.1125L437.5768899999999 72.5391335L437.5768899999999 77.5391335Z"></path><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="499" y="40" width="1" height="41"></rect><rect stroke-width="0.3" fill="black" stroke="black" stroke-dasharray="none" x="10" y="40" width="1" height="41"></rect></svg></div>';
    const actualTrimmed = el.shadowRoot.innerHTML.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');
    const expectedTrimmed = expected.replace(/\s/g, '').replace(/id="vf-auto(.*?)"/g, '');

    expect(actualTrimmed).to.equal(expectedTrimmed);
  });
});